{"version":3,"file":null,"sources":["/run/media/mokush/work/dev/jotted/src/util.js","/run/media/mokush/work/dev/jotted/src/template.js","/run/media/mokush/work/dev/jotted/src/plugin.js","/run/media/mokush/work/dev/jotted/src/pubsoup.js","/run/media/mokush/work/dev/jotted/src/plugins/render.js","/run/media/mokush/work/dev/jotted/src/plugins/scriptless.js","/run/media/mokush/work/dev/jotted/src/plugins/ace.js","/run/media/mokush/work/dev/jotted/src/plugins/codemirror.js","/run/media/mokush/work/dev/jotted/src/plugins/less.js","/run/media/mokush/work/dev/jotted/src/plugins/coffeescript.js","/run/media/mokush/work/dev/jotted/src/plugins/stylus.js","/run/media/mokush/work/dev/jotted/src/plugins/babel.js","/run/media/mokush/work/dev/jotted/src/plugins/markdown.js","/run/media/mokush/work/dev/jotted/src/plugins/console.js","/run/media/mokush/work/dev/jotted/src/plugins/play.js","/run/media/mokush/work/dev/jotted/src/bundle-plugins.js","/run/media/mokush/work/dev/jotted/src/core.js"],"sourcesContent":["/* util\n */\n\nfunction extend (obj = {}, defaults = {}) {\n  var extended = {}\n  // clone object\n  Object.keys(obj).forEach(function (key) {\n    extended[key] = obj[key]\n  })\n\n  // copy default keys where undefined\n  Object.keys(defaults).forEach(function (key) {\n    if (typeof extended[key] !== 'undefined') {\n      extended[key] = obj[key]\n    } else {\n      extended[key] = defaults[key]\n    }\n  })\n\n  return extended\n}\n\nfunction fetch (url, callback) {\n  var xhr = new window.XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'text'\n\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      callback(null, xhr.responseText)\n    } else {\n      callback(url, xhr)\n    }\n  }\n\n  xhr.onerror = function (err) {\n    callback(err)\n  }\n\n  xhr.send()\n}\n\nfunction runCallback (index, params, arr, errors, callback) {\n  return function (err, res) {\n    if (err) {\n      errors.push(err)\n    }\n\n    index++\n    if (index < arr.length) {\n      seqRunner(index, res, arr, errors, callback)\n    } else {\n      callback(errors, res)\n    }\n  }\n}\n\nfunction seqRunner (index, params, arr, errors, callback) {\n  // async\n  arr[index](params, runCallback.apply(this, arguments))\n}\n\nfunction seq (arr, params, callback = function () {}) {\n  var errors = []\n\n  if (!arr.length) {\n    return callback(errors, params)\n  }\n\n  seqRunner(0, params, arr, errors, callback)\n}\n\nfunction debounce (fn, delay) {\n  var cooldown = null\n  var multiple = null\n  return function () {\n    if (cooldown) {\n      multiple = true\n    } else {\n      fn.apply(this, arguments)\n    }\n\n    clearTimeout(cooldown)\n\n    cooldown = setTimeout(() => {\n      if (multiple) {\n        fn.apply(this, arguments)\n      }\n\n      cooldown = null\n      multiple = null\n    }, delay)\n  }\n}\n\nfunction log () {\n  console.log(arguments)\n}\n\nfunction hasClass (node, className) {\n  if (!node.className) {\n    return false\n  }\n  var tempClass = ' ' + node.className + ' '\n  className = ' ' + className + ' '\n\n  if (tempClass.indexOf(className) !== -1) {\n    return true\n  }\n\n  return false\n}\n\nfunction addClass (node, className) {\n  // class is already added\n  if (hasClass(node, className)) {\n    return node.className\n  }\n\n  if (node.className) {\n    className = ' ' + className\n  }\n\n  node.className += className\n\n  return node.className\n}\n\nfunction removeClass (node, className) {\n  var spaceBefore = ' ' + className\n  var spaceAfter = className + ' '\n\n  if (node.className.indexOf(spaceBefore) !== -1) {\n    node.className = node.className.replace(spaceBefore, '')\n  } else if (node.className.indexOf(spaceAfter) !== -1) {\n    node.className = node.className.replace(spaceAfter, '')\n  } else {\n    node.className = node.className.replace(className, '')\n  }\n\n  return node.className\n}\n\nfunction data (node, attr) {\n  return node.getAttribute('data-' + attr)\n}\n\n// mode detection based on content type and file extension\nvar defaultModemap = {\n  'html': 'html',\n  'css': 'css',\n  'js': 'javascript',\n  'less': 'less',\n  'styl': 'stylus',\n  'coffee': 'coffeescript'\n}\n\nfunction getMode (type = '', file = '', customModemap = {}) {\n  var modemap = extend(customModemap, defaultModemap)\n\n  // try the file extension\n  for (let key in modemap) {\n    let keyLength = key.length\n    if (file.slice(-keyLength++) === '.' + key) {\n      return modemap[key]\n    }\n  }\n\n  // try the file type (html/css/js)\n  for (let key in modemap) {\n    if (type === key) {\n      return modemap[key]\n    }\n  }\n\n  return type\n}\n\nexport {\n  extend,\n  fetch,\n  seq,\n  debounce,\n  log,\n  getMode,\n\n  data,\n  hasClass,\n  addClass,\n  removeClass\n}\n","/* template\n */\n\nexport function container () {\n  return `\n    <ul class=\"jotted-nav\">\n      <li class=\"jotted-nav-item jotted-nav-item-result\">\n        <a href=\"#\" data-jotted-type=\"result\">\n          Result\n        </a>\n      </li>\n      <li class=\"jotted-nav-item jotted-nav-item-html\">\n        <a href=\"#\" data-jotted-type=\"html\">\n          HTML\n        </a>\n      </li>\n      <li class=\"jotted-nav-item jotted-nav-item-css\">\n        <a href=\"#\" data-jotted-type=\"css\">\n          CSS\n        </a>\n      </li>\n      <li class=\"jotted-nav-item jotted-nav-item-js\">\n        <a href=\"#\" data-jotted-type=\"js\">\n          JavaScript\n        </a>\n      </li>\n    </ul>\n    <div class=\"jotted-pane jotted-pane-result\"><iframe></iframe></div>\n    <div class=\"jotted-pane jotted-pane-html\"></div>\n    <div class=\"jotted-pane jotted-pane-css\"></div>\n    <div class=\"jotted-pane jotted-pane-js\"></div>\n  `\n}\n\nexport function paneActiveClass (type) {\n  return `jotted-pane-active-${type}`\n}\n\nexport function containerClass () {\n  return `jotted`\n}\n\nexport function hasFileClass (type) {\n  return `jotted-has-${type}`\n}\n\nexport function editorClass (type) {\n  return `jotted-editor jotted-editor-${type}`\n}\n\nexport function editorContent (type, fileUrl = '') {\n  return `\n    <textarea data-jotted-type=\"${type}\" data-jotted-file=\"${fileUrl}\"></textarea>\n    <div class=\"jotted-status\"></div>\n  `\n}\n\nexport function statusMessage (err) {\n  return `\n    <p>${err}</p>\n  `\n}\n\nexport function statusClass (type) {\n  return `jotted-status-${type}`\n}\n\nexport function statusActiveClass (type) {\n  return `jotted-status-active-${type}`\n}\n\nexport function pluginClass (name) {\n  return `jotted-plugin-${name}`\n}\n\nexport function statusLoading (url) {\n  return `Loading <strong>${url}</strong>..`\n}\n\nexport function statusFetchError (url) {\n  return `There was an error loading <strong>${url}</strong>.`\n}\n","/* plugin\n */\n\nimport * as util from './util.js'\nimport * as template from './template.js'\n\nvar plugins = []\n\nfunction find (id) {\n  for (let pluginIndex in plugins) {\n    let plugin = plugins[pluginIndex]\n    if (plugin._id === id) {\n      return plugin\n    }\n  }\n\n  // can't find plugin\n  throw new Error(`Plugin ${id} is not registered.`)\n}\n\nfunction register (id, plugin) {\n  // private properties\n  plugin._id = id\n  plugins.push(plugin)\n}\n\n// create a new instance of each plugin, on the jotted instance\nfunction init () {\n  this._get('options').plugins.forEach((plugin) => {\n    // check if plugin definition is string or object\n    let Plugin\n    let pluginName\n    let pluginOptions = {}\n    if (typeof plugin === 'string') {\n      pluginName = plugin\n    } else if (typeof plugin === 'object') {\n      pluginName = plugin.name\n      pluginOptions = plugin.options || {}\n    }\n\n    Plugin = find(pluginName)\n    this._get('plugins')[plugin] = new Plugin(this, pluginOptions)\n\n    util.addClass(this._get('$container'), template.pluginClass(pluginName))\n  })\n}\n\nexport {\n  register,\n  init\n}\n","/* pubsoup\n */\n\nimport * as util from './util.js'\n\nexport default class PubSoup {\n  constructor () {\n    this.topics = {}\n    this.callbacks = {}\n  }\n\n  find (query) {\n    this.topics[query] = this.topics[query] || []\n    return this.topics[query]\n  }\n\n  subscribe (topic, subscriber, priority = 90) {\n    var foundTopic = this.find(topic)\n    subscriber._priority = priority\n    foundTopic.push(subscriber)\n\n    // sort subscribers on priority\n    foundTopic.sort(function (a, b) {\n      return (a._priority > b._priority) ? 1 : ((b._priority > a._priority) ? -1 : 0)\n    })\n  }\n\n  // removes a function from an array\n  remover (arr, fn) {\n    arr.forEach(function () {\n      // if no fn is specified\n      // clean-up the array\n      if (!fn) {\n        arr.length = 0\n        return\n      }\n\n      // find the fn in the arr\n      var index = [].indexOf.call(arr, fn)\n\n      // we didn't find it in the array\n      if (index === -1) {\n        return\n      }\n\n      arr.splice(index, 1)\n    })\n  }\n\n  unsubscribe (topic, subscriber) {\n    // remove from subscribers\n    var foundTopic = this.find(topic)\n    this.remover(foundTopic, subscriber)\n\n    // remove from callbacks\n    this.callbacks[topic] = this.callbacks[topic] || []\n    this.remover(this.callbacks[topic], subscriber)\n  }\n\n  // sequentially runs a method on all plugins\n  publish (topic, params = {}) {\n    var foundTopic = this.find(topic)\n    var runList = []\n\n    foundTopic.forEach(function (subscriber) {\n      runList.push(subscriber)\n    })\n\n    util.seq(runList, params, this.runCallbacks(topic))\n  }\n\n  // parallel run all .done callbacks\n  runCallbacks (topic) {\n    return (err, params) => {\n      this.callbacks[topic] = this.callbacks[topic] || []\n\n      this.callbacks[topic].forEach((c) => {\n        c(err, params)\n      })\n    }\n  }\n\n  // attach a callback when a publish[topic] is done\n  done (topic, callback = function () {}) {\n    this.callbacks[topic] = this.callbacks[topic] || []\n    this.callbacks[topic].push(callback)\n  }\n}\n","/* render plugin\n * renders the iframe\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginRender {\n  constructor (jotted, options) {\n    options = util.extend(options, {})\n\n    // iframe srcdoc support\n    var supportSrcdoc = !!('srcdoc' in document.createElement('iframe'))\n    var $resultFrame = jotted.$container.querySelector('.jotted-pane-result iframe')\n\n    var frameContent = ''\n\n    // cached content\n    var content = {\n      html: '',\n      css: '',\n      js: ''\n    }\n\n    // catch domready events from the iframe\n    window.addEventListener('message', this.domready.bind(this))\n\n    // render on each change\n    jotted.on('change', this.change.bind(this), 100)\n\n    // public\n    this.supportSrcdoc = supportSrcdoc\n    this.content = content\n    this.frameContent = frameContent\n    this.$resultFrame = $resultFrame\n\n    this.callbacks = []\n    this.index = 0\n\n    this.lastCallback = () => {}\n  }\n\n  template (style = '', body = '', script = '') {\n    return `\n      <!doctype html>\n      <html>\n        <head>\n          <script>\n            (function () {\n              window.addEventListener('DOMContentLoaded', function () {\n                window.parent.postMessage(JSON.stringify({\n                  type: 'jotted-dom-ready'\n                }), '*')\n              })\n            }())\n          </script>\n\n          <style>${style}</style>\n        </head>\n        <body>\n          ${body}\n\n          <!--\n            Jotted:\n            Empty script tag prevents malformed HTML from breaking the next script.\n          -->\n          <script></script>\n          <script>${script}</script>\n        </body>\n      </html>\n    `\n  }\n\n  change (params, callback) {\n    // cache manipulated content\n    this.content[params.type] = params.content\n\n    // check existing and to-be-rendered content\n    var oldFrameContent = this.frameContent\n    this.frameContent = this.template(this.content['css'], this.content['html'], this.content['js'])\n\n    // cache the current callback as global,\n    // so we can call it from the message callback.\n    this.lastCallback = () => {\n      this.lastCallback = () => {}\n\n      callback(null, params)\n    }\n\n    // don't render if previous and new frame content are the same.\n    // mostly for the `play` plugin,\n    // so we don't re-render the same content on each change.\n    // unless we set forceRender.\n    if (params.forceRender !== true && this.frameContent === oldFrameContent) {\n      callback(null, params)\n      return\n    }\n\n    if (this.supportSrcdoc) {\n      // srcdoc in unreliable in Chrome.\n      // https://github.com/ghinda/jotted/issues/23\n      this.$resultFrame.contentWindow.document.open()\n      this.$resultFrame.contentWindow.document.write(this.frameContent)\n      this.$resultFrame.contentWindow.document.close()\n    } else {\n      // older browsers without iframe srcset support (IE9).\n      this.$resultFrame.setAttribute('data-srcdoc', this.frameContent)\n\n      // tips from https://github.com/jugglinmike/srcdoc-polyfill\n      // Copyright (c) 2012 Mike Pennisi\n      // Licensed under the MIT license.\n      var jsUrl = 'javascript:window.frameElement.getAttribute(\"data-srcdoc\");'\n\n      this.$resultFrame.setAttribute('src', jsUrl)\n\n      // Explicitly set the iFrame's window.location for\n      // compatibility with IE9, which does not react to changes in\n      // the `src` attribute when it is a `javascript:` URL.\n      if (this.$resultFrame.contentWindow) {\n        this.$resultFrame.contentWindow.location = jsUrl\n      }\n    }\n  }\n\n  domready (e) {\n    // only catch messages from the iframe\n    if (e.source !== this.$resultFrame.contentWindow) {\n      return\n    }\n\n    var data = {}\n    try {\n      data = JSON.parse(e.data)\n    } catch (e) {}\n\n    if (data.type === 'jotted-dom-ready') {\n      this.lastCallback()\n    }\n  }\n}\n","/* scriptless plugin\n * removes script tags from html content\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginScriptless {\n  constructor (jotted, options) {\n    options = util.extend(options, {})\n\n    // https://html.spec.whatwg.org/multipage/scripting.html\n    var runScriptTypes = [\n      'application/javascript',\n      'application/ecmascript',\n      'application/x-ecmascript',\n      'application/x-javascript',\n      'text/ecmascript',\n      'text/javascript',\n      'text/javascript1.0',\n      'text/javascript1.1',\n      'text/javascript1.2',\n      'text/javascript1.3',\n      'text/javascript1.4',\n      'text/javascript1.5',\n      'text/jscript',\n      'text/livescript',\n      'text/x-ecmascript',\n      'text/x-javascript'\n    ]\n\n    // remove script tags on each change\n    jotted.on('change', this.change.bind(this))\n\n    // public\n    this.runScriptTypes = runScriptTypes\n  }\n\n  change (params, callback) {\n    if (params.type !== 'html') {\n      return callback(null, params)\n    }\n\n    // for IE9 support, remove the script tags from HTML content.\n    // when we stop supporting IE9, we can use the sandbox attribute.\n    var fragment = document.createElement('div')\n    fragment.innerHTML = params.content\n\n    var typeAttr = null\n\n    // remove all script tags\n    var $scripts = fragment.querySelectorAll('script')\n    for (let i = 0; i < $scripts.length; i++) {\n      typeAttr = $scripts[i].getAttribute('type')\n\n      // only remove script tags without the type attribute\n      // or with a javascript mime attribute value.\n      // the ones that are run by the browser.\n      if (!typeAttr || this.runScriptTypes.indexOf(typeAttr) !== -1) {\n        $scripts[i].parentNode.removeChild($scripts[i])\n      }\n    }\n\n    params.content = fragment.innerHTML\n\n    callback(null, params)\n  }\n}\n","/* ace plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginAce {\n  constructor (jotted, options) {\n    var priority = 1\n    var i\n\n    this.editor = {}\n    this.jotted = jotted\n\n    options = util.extend(options, {})\n\n    // check if Ace is loaded\n    if (typeof window.ace === 'undefined') {\n      return\n    }\n\n    var $editors = jotted.$container.querySelectorAll('.jotted-editor')\n\n    for (i = 0; i < $editors.length; i++) {\n      let $textarea = $editors[i].querySelector('textarea')\n      let type = util.data($textarea, 'jotted-type')\n      let file = util.data($textarea, 'jotted-file')\n\n      let $aceContainer = document.createElement('div')\n      $editors[i].appendChild($aceContainer)\n\n      this.editor[type] = window.ace.edit($aceContainer)\n      let editor = this.editor[type]\n\n      let editorOptions = util.extend(options)\n\n      editor.getSession().setMode('ace/mode/' + util.getMode(type, file))\n      editor.getSession().setOptions(editorOptions)\n\n      editor.$blockScrolling = Infinity\n    }\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  editorChange (params) {\n    return () => {\n      this.jotted.trigger('change', params)\n    }\n  }\n\n  change (params, callback) {\n    var editor = this.editor[params.type]\n\n    // if the event is not started by the ace change.\n    // triggered only once per editor,\n    // when the textarea is populated/file is loaded.\n    if (!params.aceEditor) {\n      editor.getSession().setValue(params.content)\n\n      // attach the event only after the file is loaded\n      params.aceEditor = editor\n      editor.on('change', this.editorChange(params))\n    }\n\n    // manipulate the params and pass them on\n    params.content = editor.getValue()\n    callback(null, params)\n  }\n}\n","/* coremirror plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginCodeMirror {\n  constructor (jotted, options) {\n    var priority = 1\n    var i\n\n    this.editor = {}\n    this.jotted = jotted\n\n    // custom modemap for codemirror\n    var modemap = {\n      'html': 'htmlmixed'\n    }\n\n    options = util.extend(options, {\n      lineNumbers: true\n    })\n\n    // check if CodeMirror is loaded\n    if (typeof window.CodeMirror === 'undefined') {\n      return\n    }\n\n    var $editors = jotted.$container.querySelectorAll('.jotted-editor')\n\n    for (i = 0; i < $editors.length; i++) {\n      let $textarea = $editors[i].querySelector('textarea')\n      let type = util.data($textarea, 'jotted-type')\n      let file = util.data($textarea, 'jotted-file')\n\n      this.editor[type] = window.CodeMirror.fromTextArea($textarea, options)\n      this.editor[type].setOption('mode', util.getMode(type, file, modemap))\n    }\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  editorChange (params) {\n    return () => {\n      // trigger a change event\n      this.jotted.trigger('change', params)\n    }\n  }\n\n  change (params, callback) {\n    var editor = this.editor[params.type]\n\n    // if the event is not started by the codemirror change.\n    // triggered only once per editor,\n    // when the textarea is populated/file is loaded.\n    if (!params.cmEditor) {\n      editor.setValue(params.content)\n\n      // attach the event only after the file is loaded\n      params.cmEditor = editor\n      editor.on('change', this.editorChange(params))\n    }\n\n    // manipulate the params and pass them on\n    params.content = editor.getValue()\n    callback(null, params)\n  }\n}\n","/* less plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginLess {\n  constructor (jotted, options) {\n    var priority = 20\n\n    options = util.extend(options, {})\n\n    // check if less is loaded\n    if (typeof window.less === 'undefined') {\n      return\n    }\n\n    // change CSS link label to Less\n    jotted.$container.querySelector('a[data-jotted-type=\"css\"]').innerHTML = 'Less'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  isLess (params) {\n    if (params.type !== 'css') {\n      return false\n    }\n\n    return (params.file.indexOf('.less') !== -1 || params.file === '')\n  }\n\n  change (params, callback) {\n    // only parse .less and blank files\n    if (this.isLess(params)) {\n      window.less.render(params.content, this.options, (err, res) => {\n        if (err) {\n          return callback(err, params)\n        } else {\n          // replace the content with the parsed less\n          params.content = res.css\n        }\n\n        callback(null, params)\n      })\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* coffeescript plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginCoffeeScript {\n  constructor (jotted, options) {\n    var priority = 20\n\n    options = util.extend(options, {})\n\n    // check if coffeescript is loaded\n    if (typeof window.CoffeeScript === 'undefined') {\n      return\n    }\n\n    // change JS link label to Less\n    jotted.$container.querySelector('a[data-jotted-type=\"js\"]').innerHTML = 'CoffeeScript'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  isCoffee (params) {\n    if (params.type !== 'js') {\n      return false\n    }\n\n    return (params.file.indexOf('.coffee') !== -1 || params.file === '')\n  }\n\n  change (params, callback) {\n    // only parse .less and blank files\n    if (this.isCoffee(params)) {\n      try {\n        params.content = window.CoffeeScript.compile(params.content)\n      } catch (err) {\n        return callback(err, params)\n      }\n    }\n\n    callback(null, params)\n  }\n}\n","/* stylus plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginStylus {\n  constructor (jotted, options) {\n    var priority = 20\n\n    options = util.extend(options, {})\n\n    // check if stylus is loaded\n    if (typeof window.stylus === 'undefined') {\n      return\n    }\n\n    // change CSS link label to Stylus\n    jotted.$container.querySelector('a[data-jotted-type=\"css\"]').innerHTML = 'Stylus'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  isStylus (params) {\n    if (params.type !== 'css') {\n      return false\n    }\n\n    return (params.file.indexOf('.styl') !== -1 || params.file === '')\n  }\n\n  change (params, callback) {\n    // only parse .styl and blank files\n    if (this.isStylus(params)) {\n      window.stylus(params.content, this.options).render((err, res) => {\n        if (err) {\n          return callback(err, params)\n        } else {\n          // replace the content with the parsed less\n          params.content = res\n        }\n\n        callback(null, params)\n      })\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* babel plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginBabel {\n  constructor (jotted, options) {\n    var priority = 20\n\n    this.options = util.extend(options, {})\n\n    // check if babel is loaded\n    if (typeof window.Babel !== 'undefined') {\n      // using babel-standalone\n      this.babel = window.Babel\n    } else if (typeof window.babel !== 'undefined') {\n      // using browser.js from babel-core 5.x\n      this.babel = {\n        transform: window.babel\n      }\n    } else {\n      return\n    }\n\n    // change js link label\n    jotted.$container.querySelector('a[data-jotted-type=\"js\"]').innerHTML = 'ES2015'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  change (params, callback) {\n    // only parse js content\n    if (params.type === 'js') {\n      try {\n        params.content = this.babel.transform(params.content, this.options).code\n      } catch (err) {\n        return callback(err, params)\n      }\n\n      callback(null, params)\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* markdown plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginMarkdown {\n  constructor (jotted, options) {\n    var priority = 20\n\n    this.options = util.extend(options, {})\n\n    // check if marked is loaded\n    if (typeof window.marked === 'undefined') {\n      return\n    }\n\n    window.marked.setOptions(options)\n\n    // change html link label\n    jotted.$container.querySelector('a[data-jotted-type=\"html\"]').innerHTML = 'Markdown'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  change (params, callback) {\n    // only parse html content\n    if (params.type === 'html') {\n      try {\n        params.content = window.marked(params.content)\n      } catch (err) {\n        return callback(err, params)\n      }\n\n      callback(null, params)\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* console plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginConsole {\n  constructor (jotted, options) {\n    options = util.extend(options, {\n      autoClear: false\n    })\n\n    var priority = 30\n    var history = []\n    var historyIndex = 0\n    var logCaptureSnippet = `(${this.capture.toString()})();`\n    var contentCache = {\n      html: '',\n      css: '',\n      js: ''\n    }\n\n    var $iframe = jotted.$container.querySelector('.jotted-pane-result iframe')\n\n    // new tab and pane markup\n    var $nav = document.createElement('li')\n    util.addClass($nav, 'jotted-nav-item jotted-nav-item-console')\n    $nav.innerHTML = '<a href=\"#\" data-jotted-type=\"console\">JS Console</a>'\n\n    var $pane = document.createElement('div')\n    util.addClass($pane, 'jotted-pane jotted-pane-console')\n\n    $pane.innerHTML = `\n      <div class=\"jotted-console-container\">\n        <ul class=\"jotted-console-output\"></ul>\n        <form class=\"jotted-console-input\">\n          <input type=\"text\">\n        </form>\n      </div>\n      <button class=\"jotted-button jotted-console-clear\">Clear</button>\n    `\n\n    jotted.$container.appendChild($pane)\n    jotted.$container.querySelector('.jotted-nav').appendChild($nav)\n\n    var $container = jotted.$container.querySelector('.jotted-console-container')\n    var $output = jotted.$container.querySelector('.jotted-console-output')\n    var $input = jotted.$container.querySelector('.jotted-console-input input')\n    var $inputForm = jotted.$container.querySelector('.jotted-console-input')\n    var $clear = jotted.$container.querySelector('.jotted-console-clear')\n\n    // submit the input form\n    $inputForm.addEventListener('submit', this.submit.bind(this))\n\n    // console history\n    $input.addEventListener('keydown', this.history.bind(this))\n\n    // clear button\n    $clear.addEventListener('click', this.clear.bind(this))\n\n    // clear the console on each change\n    if (options.autoClear === true) {\n      jotted.on('change', this.autoClear.bind(this), priority - 1)\n    }\n\n    // capture the console on each change\n    jotted.on('change', this.change.bind(this), priority)\n\n    // get log events from the iframe\n    window.addEventListener('message', this.getMessage.bind(this))\n\n    // plugin public properties\n    this.$container = $container\n    this.$input = $input\n    this.$output = $output\n    this.$iframe = $iframe\n    this.history = history\n    this.historyIndex = historyIndex\n    this.logCaptureSnippet = logCaptureSnippet\n    this.contentCache = contentCache\n  }\n\n  getMessage (e) {\n    // only catch messages from the iframe\n    if (e.source !== this.$iframe.contentWindow) {\n      return\n    }\n\n    var data = JSON.parse(e.data)\n    if (data.type === 'jotted-console-log') {\n      this.log(data.message)\n    }\n  }\n\n  autoClear (params, callback) {\n    var snippetlessContent = params.content\n\n    // remove the snippet from cached js content\n    if (params.type === 'js') {\n      snippetlessContent = snippetlessContent.replace(this.logCaptureSnippet, '')\n    }\n\n    // for compatibility with the Play plugin,\n    // clear the console only if something has changed or force rendering.\n    if (params.forceRender === true || this.contentCache[params.type] !== snippetlessContent) {\n      this.clear()\n    }\n\n    // always cache the latest content\n    this.contentCache[params.type] = snippetlessContent\n\n    callback(null, params)\n  }\n\n  change (params, callback) {\n    // only parse js content\n    if (params.type !== 'js') {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      return callback(null, params)\n    }\n\n    // check if the snippet is already added.\n    // the Play plugin caches the changed params and triggers change\n    // with the cached response, causing the snippet to be inserted\n    // multiple times, on each trigger.\n    if (params.content.indexOf(this.logCaptureSnippet) === -1) {\n      params.content = `${this.logCaptureSnippet}${params.content}`\n    }\n\n    callback(null, params)\n  }\n\n  // capture the console.log output\n  capture () {\n    // IE9 with devtools closed\n    if (typeof window.console === 'undefined' || typeof window.console.log === 'undefined') {\n      window.console = {\n        log: function () {}\n      }\n    }\n\n    // for IE9 support\n    var oldConsoleLog = Function.prototype.bind.call(window.console.log, window.console)\n\n    window.console.log = function () {\n      // send log messages to the parent window\n      [].slice.call(arguments).forEach(function (message) {\n        window.parent.postMessage(JSON.stringify({\n          type: 'jotted-console-log',\n          message: message\n        }), '*')\n      })\n\n      // in IE9, console.log is object instead of function\n      // https://connect.microsoft.com/IE/feedback/details/585896/console-log-typeof-is-object-instead-of-function\n      oldConsoleLog.apply(oldConsoleLog, arguments)\n    }\n  }\n\n  log (message = '', type) {\n    var $log = document.createElement('li')\n    util.addClass($log, 'jotted-console-log')\n\n    if (typeof type !== 'undefined') {\n      util.addClass($log, `jotted-console-log-${type}`)\n    }\n\n    $log.innerHTML = message\n\n    this.$output.appendChild($log)\n  }\n\n  submit (e) {\n    var inputValue = this.$input.value.trim()\n\n    // if input is blank, do nothing\n    if (inputValue === '') {\n      return e.preventDefault()\n    }\n\n    // add run to history\n    this.history.push(inputValue)\n    this.historyIndex = this.history.length\n\n    // log input value\n    this.log(inputValue, 'history')\n\n    // add return if it doesn't start with it\n    if (inputValue.indexOf('return') !== 0) {\n      inputValue = 'return ' + inputValue\n    }\n\n    // show output or errors\n    try {\n      // run the console input in the iframe context\n      var scriptOutput = this.$iframe.contentWindow.eval(`(function() {${inputValue}})()`)\n\n      this.log(scriptOutput)\n    } catch (err) {\n      this.log(err, 'error')\n    }\n\n    // clear the console value\n    this.$input.value = ''\n\n    // scroll console pane to bottom\n    // to keep the input into view\n    this.$container.scrollTop = this.$container.scrollHeight\n\n    e.preventDefault()\n  }\n\n  clear () {\n    this.$output.innerHTML = ''\n  }\n\n  history (e) {\n    var UP = 38\n    var DOWN = 40\n    var gotHistory = false\n    var selectionStart = this.$input.selectionStart\n\n    // only if we have previous history\n    // and the cursor is at the start\n    if (e.keyCode === UP && this.historyIndex !== 0 && selectionStart === 0) {\n      this.historyIndex--\n      gotHistory = true\n    }\n\n    // only if we have future history\n    // and the cursor is at the end\n    if (e.keyCode === DOWN && this.historyIndex !== this.history.length - 1 && selectionStart === this.$input.value.length) {\n      this.historyIndex++\n      gotHistory = true\n    }\n\n    // only if history changed\n    if (gotHistory) {\n      this.$input.value = this.history[this.historyIndex]\n    }\n  }\n}\n","/* play plugin\n * adds a Run button\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginPlay {\n  constructor (jotted, options) {\n    options = util.extend(options, {\n      firstRun: true\n    })\n\n    var priority = 10\n    // cached code\n    var cache = {}\n    // latest version of the code.\n    // replaces the cache when the run button is pressed.\n    var code = {}\n\n    // set firstRun=false to start with a blank preview.\n    // run the real content only after the first Run button press.\n    if (options.firstRun === false) {\n      cache = {\n        html: {\n          type: 'html',\n          content: ''\n        },\n        css: {\n          type: 'css',\n          content: ''\n        },\n        js: {\n          type: 'js',\n          content: ''\n        }\n      }\n    }\n\n    // run button\n    var $button = document.createElement('button')\n    $button.className = 'jotted-button jotted-button-play'\n    $button.innerHTML = 'Run'\n\n    jotted.$container.appendChild($button)\n    $button.addEventListener('click', this.run.bind(this))\n\n    // capture the code on each change\n    jotted.on('change', this.change.bind(this), priority)\n\n    // public\n    this.cache = cache\n    this.code = code\n    this.jotted = jotted\n  }\n\n  change (params, callback) {\n    // always cache the latest code\n    this.code[params.type] = util.extend(params)\n\n    // replace the params with the latest cache\n    if (typeof this.cache[params.type] !== 'undefined') {\n      callback(null, this.cache[params.type])\n\n      // make sure we don't cache forceRender,\n      // and send it with each change.\n      this.cache[params.type].forceRender = null\n    } else {\n      // cache the first run\n      this.cache[params.type] = util.extend(params)\n\n      callback(null, params)\n    }\n  }\n\n  run () {\n    // trigger change on each type with the latest code\n    for (let type in this.code) {\n      this.cache[type] = util.extend(this.code[type], {\n        // force rendering on each Run press\n        forceRender: true\n      })\n\n      // trigger the change\n      this.jotted.trigger('change', this.cache[type])\n    }\n  }\n}\n","/* bundle plugins\n */\n\n// register bundled plugins\nimport PluginRender from './plugins/render.js'\nimport PluginScriptless from './plugins/scriptless.js'\n\nimport PluginAce from './plugins/ace.js'\nimport PluginCodeMirror from './plugins/codemirror.js'\nimport PluginLess from './plugins/less.js'\nimport PluginCoffeeScript from './plugins/coffeescript.js'\nimport PluginStylus from './plugins/stylus.js'\nimport PluginBabel from './plugins/babel.js'\nimport PluginMarkdown from './plugins/markdown.js'\nimport PluginConsole from './plugins/console.js'\nimport PluginPlay from './plugins/play.js'\n\nexport default function BundlePlugins (jotted) {\n  jotted.plugin('render', PluginRender)\n  jotted.plugin('scriptless', PluginScriptless)\n\n  jotted.plugin('ace', PluginAce)\n  jotted.plugin('codemirror', PluginCodeMirror)\n  jotted.plugin('less', PluginLess)\n  jotted.plugin('coffeescript', PluginCoffeeScript)\n  jotted.plugin('stylus', PluginStylus)\n  jotted.plugin('babel', PluginBabel)\n  jotted.plugin('markdown', PluginMarkdown)\n  jotted.plugin('console', PluginConsole)\n  jotted.plugin('play', PluginPlay)\n}\n","/* jotted\n */\n\nimport * as util from './util.js'\nimport * as template from './template.js'\nimport * as plugin from './plugin.js'\nimport PubSoup from './pubsoup.js'\n\nclass Jotted {\n  constructor ($jottedContainer, opts) {\n    if (!$jottedContainer) {\n      throw new Error('Can\\'t find Jotted container.')\n    }\n\n    // private data\n    var _private = {}\n    this._get = function (key) {\n      return _private[key]\n    }\n    this._set = function (key, value) {\n      _private[key] = value\n      return _private[key]\n    }\n\n    // options\n    var options = this._set('options', util.extend(opts, {\n      files: [],\n      showBlank: false,\n      runScripts: true,\n      pane: 'result',\n      debounce: 250,\n      plugins: []\n    }))\n\n    // the render plugin is mandatory\n    options.plugins.push('render')\n\n    // use the scriptless plugin if runScripts is false\n    if (options.runScripts === false) {\n      options.plugins.push('scriptless')\n    }\n\n    // cached content for the change method.\n    this._set('cachedContent', {\n      html: null,\n      css: null,\n      js: null\n    })\n\n    // PubSoup\n    var pubsoup = this._set('pubsoup', new PubSoup())\n\n    this._set('trigger', this.trigger())\n    this._set('on', function () {\n      pubsoup.subscribe.apply(pubsoup, arguments)\n    })\n    this._set('off', function () {\n      pubsoup.unsubscribe.apply(pubsoup, arguments)\n    })\n    var done = this._set('done', function () {\n      pubsoup.done.apply(pubsoup, arguments)\n    })\n\n    // after all plugins run\n    // show errors\n    done('change', this.errors.bind(this))\n\n    // DOM\n    var $container = this._set('$container', $jottedContainer)\n    $container.innerHTML = template.container()\n    util.addClass($container, template.containerClass())\n\n    // default pane\n    var paneActive = this._set('paneActive', options.pane)\n    util.addClass($container, template.paneActiveClass(paneActive))\n\n    // status nodes\n    this._set('$status', {})\n\n    for (let type of [ 'html', 'css', 'js' ]) {\n      this.markup(type)\n    }\n\n    // textarea change events.\n    $container.addEventListener('keyup', util.debounce(this.change.bind(this), options.debounce))\n    $container.addEventListener('change', util.debounce(this.change.bind(this), options.debounce))\n\n    // pane change\n    $container.addEventListener('click', this.pane.bind(this))\n\n    // expose public properties\n    this.$container = this._get('$container')\n    this.on = this._get('on')\n    this.off = this._get('off')\n    this.done = this._get('done')\n    this.trigger = this._get('trigger')\n    this.paneActive = this._get('paneActive')\n\n    // init plugins\n    this._set('plugins', {})\n    plugin.init.call(this)\n\n    // load files\n    for (let type of [ 'html', 'css', 'js' ]) {\n      this.load(type)\n    }\n\n    // show all tabs, even if empty\n    if (options.showBlank) {\n      for (let type of [ 'html', 'css', 'js' ]) {\n        util.addClass($container, template.hasFileClass(type))\n      }\n    }\n  }\n\n  findFile (type) {\n    var file = {}\n    var options = this._get('options')\n\n    for (let fileIndex in options.files) {\n      let file = options.files[fileIndex]\n      if (file.type === type) {\n        return file\n      }\n    }\n\n    return file\n  }\n\n  markup (type) {\n    var $container = this._get('$container')\n    var $parent = $container.querySelector(`.jotted-pane-${type}`)\n    // create the markup for an editor\n    var file = this.findFile(type)\n\n    var $editor = document.createElement('div')\n    $editor.innerHTML = template.editorContent(type, file.url)\n    $editor.className = template.editorClass(type)\n\n    $parent.appendChild($editor)\n\n    // get the status node\n    this._get('$status')[type] = $parent.querySelector('.jotted-status')\n\n    // if we have a file for the current type\n    if (typeof file.url !== 'undefined' || typeof file.content !== 'undefined') {\n      // add the has-type class to the container\n      util.addClass($container, template.hasFileClass(type))\n    }\n  }\n\n  load (type) {\n    // create the markup for an editor\n    var file = this.findFile(type)\n    var $textarea = this._get('$container').querySelector(`.jotted-pane-${type} textarea`)\n\n    // file as string\n    if (typeof file.content !== 'undefined') {\n      this.setValue($textarea, file.content)\n    } else if (typeof file.url !== 'undefined') {\n      // show loading message\n      this.status('loading', [ template.statusLoading(file.url) ], {\n        type: type,\n        file: file\n      })\n\n      // file as url\n      util.fetch(file.url, (err, res) => {\n        if (err) {\n          // show load errors\n          this.status('error', [ template.statusFetchError(err) ], {\n            type: type\n          })\n\n          return\n        }\n\n        // clear the loading status\n        this.clearStatus('loading', {\n          type: type\n        })\n\n        this.setValue($textarea, res)\n      })\n    } else {\n      // trigger a change event on blank editors,\n      // for editor plugins to catch.\n      // (eg. the codemirror and ace plugins attach the change event\n      // only after the initial change/load event)\n      this.setValue($textarea, '')\n    }\n  }\n\n  setValue ($textarea, val) {\n    $textarea.value = val\n\n    // trigger change event, for initial render\n    this.change({\n      target: $textarea\n    })\n  }\n\n  change (e) {\n    var type = util.data(e.target, 'jotted-type')\n    if (!type) {\n      return\n    }\n\n    // don't trigger change if the content hasn't changed.\n    // eg. when blurring the textarea.\n    var cachedContent = this._get('cachedContent')\n    if (cachedContent[type] === e.target.value) {\n      return\n    }\n\n    // cache latest content\n    cachedContent[type] = e.target.value\n\n    // trigger the change event\n    this.trigger('change', {\n      type: type,\n      file: util.data(e.target, 'jotted-file'),\n      content: cachedContent[type]\n    })\n  }\n\n  errors (errs, params) {\n    this.status('error', errs, params)\n  }\n\n  pane (e) {\n    if (!util.data(e.target, 'jotted-type')) {\n      return\n    }\n\n    var $container = this._get('$container')\n    var paneActive = this._get('paneActive')\n    util.removeClass($container, template.paneActiveClass(paneActive))\n\n    paneActive = this._set('paneActive', util.data(e.target, 'jotted-type'))\n    util.addClass($container, template.paneActiveClass(paneActive))\n\n    e.preventDefault()\n  }\n\n  status (statusType = 'error', messages = [], params = {}) {\n    if (!messages.length) {\n      return this.clearStatus(statusType, params)\n    }\n\n    var $status = this._get('$status')\n\n    // add error/loading class to status\n    util.addClass($status[params.type], template.statusClass(statusType))\n\n    util.addClass(this._get('$container'), template.statusActiveClass(params.type))\n\n    var markup = ''\n    messages.forEach(function (err) {\n      markup += template.statusMessage(err)\n    })\n\n    $status[params.type].innerHTML = markup\n  }\n\n  clearStatus (statusType, params) {\n    var $status = this._get('$status')\n\n    util.removeClass($status[params.type], template.statusClass(statusType))\n    util.removeClass(this._get('$container'), template.statusActiveClass(params.type))\n    $status[params.type].innerHTML = ''\n  }\n\n  // debounced trigger method\n  // custom debouncer to use a different timer per type\n  trigger () {\n    var options = this._get('options')\n    var pubsoup = this._get('pubsoup')\n\n    // allow disabling the trigger debouncer.\n    // mostly for testing: when trigger events happen rapidly\n    // multiple events of the same type would be caught once.\n    if (options.debounce === false) {\n      return function () {\n        pubsoup.publish.apply(pubsoup, arguments)\n      }\n    }\n\n    // cooldown timer\n    var cooldown = {}\n    // multiple calls\n    var multiple = {}\n\n    return function (topic, { type = 'default' } = {}) {\n      if (cooldown[type]) {\n        // if we had multiple calls before the cooldown\n        multiple[type] = true\n      } else {\n        // trigger immediately once cooldown is over\n        pubsoup.publish.apply(pubsoup, arguments)\n      }\n\n      clearTimeout(cooldown[type])\n\n      // set cooldown timer\n      cooldown[type] = setTimeout(() => {\n        // if we had multiple calls before the cooldown,\n        // trigger the function again at the end.\n        if (multiple[type]) {\n          pubsoup.publish.apply(pubsoup, arguments)\n        }\n\n        multiple[type] = null\n        cooldown[type] = null\n      }, options.debounce)\n    }\n  }\n}\n\n// register plugins\nJotted.plugin = function () {\n  return plugin.register.apply(this, arguments)\n}\n\n// register bundled plugins\nimport BundlePlugins from './bundle-plugins.js'\nBundlePlugins(Jotted)\n\nexport default Jotted\n"],"names":["extend","obj","defaults","extended","Object","keys","forEach","key","fetch","url","callback","xhr","window","XMLHttpRequest","open","responseType","onload","status","responseText","onerror","err","send","runCallback","index","params","arr","errors","res","push","length","seqRunner","apply","arguments","seq","debounce","fn","delay","cooldown","multiple","clearTimeout","setTimeout","hasClass","node","className","tempClass","indexOf","addClass","removeClass","spaceBefore","spaceAfter","replace","data","attr","getAttribute","defaultModemap","getMode","type","file","customModemap","modemap","keyLength","slice","container","paneActiveClass","containerClass","hasFileClass","editorClass","editorContent","fileUrl","statusMessage","statusClass","statusActiveClass","pluginClass","name","statusLoading","statusFetchError","plugins","find","id","pluginIndex","plugin","_id","Error","register","init","_get","Plugin","pluginName","pluginOptions","options","util","template","PubSoup","topics","callbacks","query","topic","subscriber","priority","foundTopic","_priority","sort","a","b","call","splice","remover","runList","runCallbacks","c","PluginRender","jotted","supportSrcdoc","document","createElement","$resultFrame","$container","querySelector","frameContent","content","html","css","js","addEventListener","domready","bind","on","change","lastCallback","style","body","script","oldFrameContent","forceRender","contentWindow","write","close","setAttribute","jsUrl","location","e","source","JSON","parse","PluginScriptless","runScriptTypes","fragment","innerHTML","typeAttr","$scripts","querySelectorAll","i","parentNode","removeChild","PluginAce","editor","ace","$editors","$textarea","$aceContainer","appendChild","edit","editorOptions","getSession","setMode","setOptions","$blockScrolling","Infinity","trigger","aceEditor","setValue","editorChange","getValue","PluginCodeMirror","lineNumbers","CodeMirror","fromTextArea","setOption","cmEditor","PluginLess","less","isLess","render","PluginCoffeeScript","CoffeeScript","isCoffee","compile","PluginStylus","stylus","isStylus","PluginBabel","Babel","babel","transform","code","PluginMarkdown","marked","PluginConsole","autoClear","history","historyIndex","logCaptureSnippet","capture","toString","contentCache","$iframe","$nav","$pane","$output","$input","$inputForm","$clear","submit","clear","getMessage","log","message","snippetlessContent","console","oldConsoleLog","Function","prototype","parent","postMessage","stringify","$log","inputValue","value","trim","preventDefault","scriptOutput","eval","scrollTop","scrollHeight","UP","DOWN","gotHistory","selectionStart","keyCode","PluginPlay","firstRun","cache","$button","run","BundlePlugins","Jotted","$jottedContainer","opts","_private","_set","files","showBlank","runScripts","pane","pubsoup","subscribe","unsubscribe","done","paneActive","markup","off","load","fileIndex","$parent","findFile","$editor","clearStatus","val","target","cachedContent","errs","statusType","messages","$status","publish"],"mappings":"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"}